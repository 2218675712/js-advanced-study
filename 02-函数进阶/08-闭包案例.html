<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        /*
        * 时间:   2020年05月25日21:23:24
        * 目的:   js闭包案例
        *
        * 结果:
        *       ---------------------------------
        *
        *
        *       ---------------------------------
        * */
    </script>
</head>
<body>
<ul class="nav">
    <li>北京</li>
    <li>上海</li>
    <li>深圳</li>
</ul>
<script>
    var list = document.querySelector("ul.nav").querySelectorAll("li");

    /*
        // 思路一 动态添加属性
        for (var i = 0; i < list.length; i++) {
            list[i].index = i;
            list[i].onclick = function () {
                console.log(this.index);
            }
        }
      */

    /*
        // 思路二 闭包
        for (var i = 0; i < list.length; i++) {
            (function (i) {
                list[i].onclick = function () {
                    console.log(i);
                }
            })(i);
        }
    */

    /*
        // 思路三 es6 let
        for (let i = 0; i < list.length; i++) {
            list[i].onclick = function () {
                console.log(i);
            }
        }
    */

    /*
        // 3秒后 打印每个城市
        for (var i = 0; i < list.length; i++) {
            // 闭包
            (function (i) {
                setTimeout(function () {
                    console.log(list[i].innerHTML);
                }, 3000)

            })(i)
        }
    */
    // 滴滴打车 3公里以内 14 每增加1公里收5元
    // 堵车 在原来收费上多收5元
    var c = (function () {
        var base = 14;
        var sum = 0;
        return {
            normal: function (n) {
                if (n <= 3) {
                    sum = base;
                } else {
                    sum = base + (n - 3) * 5;
                }
            },
            yj: function (flag) {
                return flag ? sum + 5 : sum;
            }
        }
    })()
    c.normal(5);
    console.log(c.yj(false));
</script>
</body>
</html>